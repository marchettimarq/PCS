
:root{
  /* Day theme */
  --brand-600:#2F6BFF; --brand-700:#1E53E6;
  --bg:#F7F8FC; --card:#FFFFFF; --text:#0F172A; --muted:#475569; --border:#E2E8F0;
}
:root.dark{
  /* Night theme */
  --brand-600:#5B7CFF; --brand-700:#7C93FF;
  --bg:#0B1020; --card:#121A2C; --text:#E6EAF5; --muted:#9AA7C7; --border:#20283A;
}
html,body{height:100%} body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
html.modal-open{overflow:hidden}
button,input,textarea{font:inherit}

.topbar{position:sticky;top:0;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:12px 14px;padding-top:calc(env(safe-area-inset-top) + 12px);background:var(--brand-600);color:#fff}
.brand{font-weight:900}
.actions .icon{min-width:44px;min-height:44px;border-radius:12px;border:none;background:rgba(255,255,255,.15);color:#fff;margin-left:8px}

.bottombar{position:fixed;left:0;right:0;bottom:0;z-index:95;display:flex;justify-content:space-around;align-items:center;padding:8px 8px;padding-bottom:calc(env(safe-area-inset-bottom) + 8px);background:var(--card);border-top:1px solid var(--border)}
.tab{min-width:44px;min-height:44px;border-radius:12px;border:1px solid var(--border);background:var(--card);color:var(--text);padding:8px 12px}
.fab{width:56px;height:56px;border-radius:28px;border:none;background:var(--brand-600);color:#fff;font-size:28px;box-shadow:0 6px 16px rgba(0,0,0,.25)}

.app{padding:12px 12px 96px}

.view{display:none} .view.active{display:block}

/* Carousel */
.carousel{display:flex;gap:12px;overflow-x:auto;scroll-snap-type:x mandatory;padding:8px 2px}
.carousel::-webkit-scrollbar{display:none}
.card{flex:0 0 86%;scroll-snap-align:center;background:var(--card);border:1px solid var(--border);border-radius:18px;box-shadow:0 8px 18px rgba(0,0,0,.12);padding:14px}
.card h3{margin:0 0 6px 0}
.progress{height:8px;background:rgba(255,255,255,.2);border-radius:999px;overflow:hidden;border:1px solid var(--border)}
.progress > div{height:100%;background:linear-gradient(90deg,var(--brand-600),var(--brand-700));width:0%}
.meta{color:var(--muted);font-size:12px;margin-top:8px}

.pager{display:flex;justify-content:center;gap:8px;margin:10px 0}
.dot{width:8px;height:8px;border-radius:50%;background:#9aa4b2;opacity:.5}
.dot.active{opacity:1;background:var(--brand-600)}

/* Tasks */
.phase-header{display:flex;align-items:center;gap:8px}
.title{flex:1;border:1px dashed transparent;background:transparent;color:var(--text);font-weight:900;font-size:20px}
.title:focus{outline:none;border-color:var(--border);background:rgba(255,255,255,.04)}
.tasks,.completed{display:grid;gap:10px;margin-top:12px}
.task{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:10px}
.row{display:grid;grid-template-columns:36px 1fr 30px;align-items:center;gap:8px}
.chk{width:28px;height:28px;border-radius:50%;border:2px solid var(--brand-600);display:flex;align-items:center;justify-content:center;background:transparent}
.chk.done{background:var(--brand-600);color:#fff}
.t-title{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700}
.t-sub{color:var(--muted);font-size:12px;margin-top:2px}
.chev{border:none;background:transparent;font-size:18px}
.details{display:none;margin-top:8px;color:var(--text)}
.details.open{display:block}
.btn{min-height:44px;border-radius:12px;border:1px solid var(--border);background:var(--card)}
.btn.danger{background:#3a0f1b;color:#ffb4c8;border-color:#7a1731}

/* Sheets/Dialogs */
.scrim{position:fixed;inset:0;background:rgba(0,0,0,.45);backdrop-filter:blur(4px);z-index:1000}
.sheet,.dialog{position:fixed;left:0;right:0;margin:auto;background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:0 18px 40px rgba(0,0,0,.4);z-index:1001}
.sheet{bottom:0;max-width:560px;padding:12px}
.sheet-btn{width:100%;padding:12px;border-radius:12px;border:1px solid var(--border);background:var(--card);margin-top:8px}
.sheet-btn.primary{background:var(--brand-600);color:#fff;border-color:transparent}
.sheet-btn.secondary{background:transparent}
.sheet-btn.danger{background:#3a0f1b;color:#ffb4c8;border-color:#7a1731}
.sheet-row{display:flex;gap:8px;justify-content:flex-end}
.dialog{top:20%;max-width:560px;padding:16px}
.dialog-row{display:flex;gap:8px;justify-content:flex-end}

/* Toast */
.toast{position:fixed;bottom:calc(env(safe-area-inset-bottom) + 76px);left:50%;transform:translateX(-50%);background:var(--card);border:1px solid var(--border);padding:10px 14px;border-radius:999px;box-shadow:0 8px 18px rgba(0,0,0,.25);z-index:1100}
